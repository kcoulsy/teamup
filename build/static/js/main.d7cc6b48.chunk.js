(this.webpackJsonpteamup=this.webpackJsonpteamup||[]).push([[0],{226:function(e,t,a){e.exports=a(396)},395:function(e,t,a){},396:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(26),c=a.n(s),i=a(32),l=a(221),o={attemptingLogin:!1,token:null,loginAttemptFailed:!1,appInitialising:!1,appInitialised:!1,attemptingRegister:!1};var u={_id:null,name:"",description:"",users:[],roles:[],rolePermissions:[]},m={_id:"",email:"",username:"",teamInvites:[]},p=Object(l.a)({reducer:{auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(null===t||void 0===t?void 0:t.type){case"APP_INITIALISING":return Object.assign({},e,{appInitialising:!0});case"APP_INITIALISED":return Object.assign({},e,{appInitialised:!0,loginAttemptFailed:!1});case"AUTH_LOGIN_ATTEMPT":return Object.assign({},e,{attemptingLogin:!0,loginAttemptFailed:!1});case"AUTH_LOGIN_SUCCESS":return Object.assign({},e,{attemptingLogin:!1,token:t.token,loginAttemptFailed:!1});case"AUTH_LOGIN_FAIL":return Object.assign({},e,{attemptingLogin:!1,token:null,loginAttemptFailed:!0});case"AUTH_LOGOUT":return Object.assign({},e,{token:null,attemptingLogin:!1,loginAttemptFailed:!1});case"AUTH_REGISTER_ATTEMPT":return Object.assign({},e,{attemptingRegister:!0});case"AUTH_REGISTER_SUCCESS":return Object.assign({},e,{attemptingRegister:!1,registerErrorMsg:null});case"AUTH_REGISTER_FAIL":return Object.assign({},e,{attemptingRegister:!1,registerErrorMsg:t.errorMsg});default:return e}},team:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(null===t||void 0===t?void 0:t.type){case"TEAM_MY_FETCH":return Object.assign({},e,{_id:t.payload._id,name:t.payload.name,description:t.payload.description,users:t.payload.users,roles:t.payload.roles,rolePermissions:t.payload.rolePermissions})}return e},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_FETCH":return Object.assign({},e,t.payload);default:return e}}}}),d=a(6),E=a.n(d),f=a(16),v=a(132),b={apiUrl:"/api/"},h=function(){var e=Object(f.a)(E.a.mark((function e(t,a){var n,r,s,c,i=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:{},r={method:a,headers:{"Content-Type":"application/json"}},"string"===typeof(s=localStorage.getItem("userToken"))&&(r.headers=Object(v.a)({},r.headers,{"x-auth":s})),"GET"!==a&&(r.body=JSON.stringify(n)),e.next=7,fetch(b.apiUrl+t,r);case 7:return c=e.sent,e.abrupt("return",c.json());case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function g(e){return{type:"USER_FETCH",payload:e}}function T(e){var t=e._id,a=void 0===t?null:t,n=e.name,r=void 0===n?null:n,s=e.description,c=void 0===s?null:s,i=e.users,l=void 0===i?[]:i,o=e.roles,u=void 0===o?[]:o,m=e.rolePermissions;return{type:"TEAM_MY_FETCH",payload:{_id:a,name:r,description:c,users:l,roles:u,rolePermissions:void 0===m?[]:m}}}function j(){return{type:"AUTH_LOGIN_ATTEMPT"}}function O(e){return localStorage.setItem("userToken",e),{type:"AUTH_LOGIN_SUCCESS",token:e}}function y(){return localStorage.removeItem("userToken"),{type:"AUTH_LOGIN_FAIL"}}function _(e){return{type:"AUTH_REGISTER_FAIL",errorMsg:e}}function k(){return{type:"APP_INITIALISED"}}var I,w,P=a(51),R=a(47),S=a(397),x=a(34),A=a(50),C=a(414),M=a(415),N=a(416),U=a(417),L=a(418),D=function(e){return"string"===typeof e&&(null===e||void 0===e?void 0:e.length)>0},G=function(e){return null!==e.team._id},F=function(e,t){if(!G(e))return!1;var a=e.team.users.find((function(t){return t.user._id===e.user._id})),n=null===a||void 0===a?void 0:a.roleIndex;if("number"!==typeof n)return!1;var r=e.team.rolePermissions.find((function(e){return e.roleIndex===n}));return(null===r||void 0===r?void 0:r.permissions.includes(t))||!1},H=a(46),V=(I={},Object(H.a)(I,"PERM_VIEW_TEAM_SETTINGS","View Team Settings"),Object(H.a)(I,"PERM_UPDATE_TEAM_DETAILS","Update Team Details"),Object(H.a)(I,"PERM_INVITE_TEAM_MEMBERS","Invite Team Members"),Object(H.a)(I,"PERM_UPDATE_TEAM_MEMBERS","Update Team Members"),Object(H.a)(I,"PERM_REMOVE_TEAM_MEMBERS","Remove Team Members"),Object(H.a)(I,"PERM_UPDATE_TEAM_ROLES","Update Team Roles"),Object(H.a)(I,"PERM_UPDATE_TEAM_PERMS","Update Team Permissions"),Object(H.a)(I,"PERM_CREATE_TEAM_PROJECT","Create Team Project"),Object(H.a)(I,"PERM_EDIT_TEAM_PROJECT","Edit Team Project"),Object(H.a)(I,"PERM_REMOVE_TEAM_PROJECT","Remove Team Project"),Object(H.a)(I,"PERM_ADD_TASK","Add Task"),Object(H.a)(I,"PERM_EDIT_OTHER_TASK","Edit Other Members Tasks"),Object(H.a)(I,"PERM_DELETE_OTHER_TASK","Delete Other Members Tasks"),I),Y=S.a.Sider,B=A.a.SubMenu;!function(e){e.DEFAULT="default",e.HOME="home",e.LOGIN="login",e.REGISTER="register",e.LOGOUT="logout",e.USER="user",e.USER_PROFILE="user_profile",e.USER_PROJECTS="user_projects",e.USER_SETTINGS="user_settings",e.TEAM="team",e.TEAM_PROFILE="team_profile",e.TEAM_PROJECTS="team_projects",e.TEAM_SETTINGS="team_settings"}(w||(w={}));var J,K,q={startLogout:function(){return function(){var e=Object(f.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("userToken"),t({type:"AUTH_LOGOUT"}),t(g({_id:"",username:"",email:"",team:""})),t(T({}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},z=Object(i.b)((function(e){return{isLoggedIn:D(e.auth.token),showTeamProjects:G(e),showTeamSettings:G(e)&&F(e,"PERM_VIEW_TEAM_SETTINGS")}}),q)((function(e){var t=e.isLoggedIn,a=e.startLogout,s=e.showTeamProjects,c=e.showTeamSettings,i=Object(n.useState)(!1),l=Object(x.a)(i,2),o=l[0],u=l[1],m=Object(n.useState)([w.HOME]),p=Object(x.a)(m,2),d=p[0],E=p[1],f=Object(R.g)();return Object(n.useEffect)((function(){t&&(d.includes(w.LOGIN)||d.includes(w.REGISTER))&&E([w.HOME])}),[t,d]),r.a.createElement(Y,{collapsible:!0,collapsed:o,onCollapse:function(){return u(!o)}},r.a.createElement("div",{className:"logo"}),t?r.a.createElement(A.a,{theme:"dark",defaultSelectedKeys:d,selectedKeys:d,mode:"inline"},r.a.createElement(A.a.Item,{key:w.DEFAULT,className:"side-nav__logo"},"TeamUp"),r.a.createElement(A.a.Item,{key:w.HOME,icon:r.a.createElement(M.a,null),onClick:function(){E([w.HOME]),f.push("/")}},"Dashboard"),r.a.createElement(B,{key:w.USER,icon:r.a.createElement(N.a,null),title:"User"},r.a.createElement(A.a.Item,{key:w.USER_PROJECTS,onClick:function(){E([w.USER_PROJECTS]),f.push("/projects")}},"My Projects"),r.a.createElement(A.a.Item,{key:w.USER_SETTINGS,onClick:function(){E([w.USER_SETTINGS]),f.push("/settings")}},"Account Settings")),r.a.createElement(B,{key:w.TEAM,icon:r.a.createElement(U.a,null),title:"Team"},s?null:r.a.createElement(A.a.Item,{key:w.TEAM_PROFILE,onClick:function(){E([w.TEAM_PROFILE]),f.push("/team")}},"My Team"),s?r.a.createElement(A.a.Item,{key:w.TEAM_PROJECTS,onClick:function(){E([w.TEAM_PROJECTS]),f.push("/team/projects")}},"Team Projects"):null,c?r.a.createElement(A.a.Item,{key:w.TEAM_SETTINGS,onClick:function(){E([w.TEAM_SETTINGS]),f.push("/team/settings")}},"Team Settings"):null),r.a.createElement(A.a.Item,{key:w.LOGOUT,icon:r.a.createElement(L.a,null),onClick:function(){E([w.HOME]),a(),f.push("/")}},"Logout")):r.a.createElement(A.a,{theme:"dark",defaultSelectedKeys:d,selectedKeys:d,mode:"inline"},r.a.createElement(A.a.Item,{key:w.DEFAULT,className:"side-nav__logo"},"TeamUp"),r.a.createElement(A.a.Item,{key:w.LOGIN,icon:r.a.createElement(C.a,null),onClick:function(){E([w.LOGIN]),f.push("/login")}},"Login"),r.a.createElement(A.a.Item,{key:w.REGISTER,icon:r.a.createElement(C.a,null),onClick:function(){E([w.REGISTER]),f.push("/register")}},"Register")))})),W=S.a.Content,Q=function(e){var t=e.children;return r.a.createElement(S.a,{className:"app-layout"},r.a.createElement(z,null),r.a.createElement(S.a,null,r.a.createElement(W,{className:"app-layout__content"},r.a.createElement("div",{className:"app-layout__container"},t))))},X=a(404),Z=a(410),$=a(224),ee=a(401),te=a(412),ae=a(405),ne=X.a.confirm,re={acceptTeamInvite:function(e){return function(t){return new Promise(function(){var a=Object(f.a)(E.a.mark((function a(n,r){var s,c,i,l;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h("/team/accept","POST",{teamId:e});case 3:s=a.sent,c=s.success,i=s.team,l=s.user,c?(t(g(l)),t(T(i)),n(!0)):r(!1),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),r(!1);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e,t){return a.apply(this,arguments)}}())}},declineTeamInvite:function(e){return function(t){return new Promise(function(){var a=Object(f.a)(E.a.mark((function a(n,r){var s,c,i;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h("/team/decline","POST",{teamId:e});case 3:s=a.sent,c=s.success,i=s.user,c?(t(g(i)),n(!0)):n(!1),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),n(!1);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e,t){return a.apply(this,arguments)}}())}}},se=Object(i.b)((function(e){return{teamInvites:e.user.teamInvites||[]}}),re)((function(e){var t=e.teamInvites,a=e.acceptTeamInvite,n=e.declineTeamInvite;return r.a.createElement("div",null,t.map((function(e){return r.a.createElement(Z.a,{key:e._id,message:'You have been invited to join the team "'.concat(e.name,'"'),closeText:"Respond",className:"page__page-header",style:{marginBottom:"20px"},onClose:function(){ne({title:"Join Team",content:"Are you sure you want to join this team? You can only join one.",okText:"Accept",cancelText:"Decline",onOk:function(){var t=Object(f.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(e._id);case 2:t.sent?$.a.success({message:"You have joined the team successfully!"}):$.a.error({message:"Something went wrong when joining team"});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),onCancel:function(){var t=Object(f.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n(e._id);case 3:t.sent?$.a.success({message:'You have declined an invitation from the team "'.concat(e.name,'".')}):$.a.error({message:"Something went wrong when joining team"}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("ERROR",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()})}})})),r.a.createElement(ee.a,{title:"Welcome!"},r.a.createElement("p",null,"Thanks for checking out the project, the intent of this project is to have a full stack application as an example for my development skills."),r.a.createElement("p",null,"The purpose of the app is to track Projects and Tasks, for personal use or to use as a team. With teams there is a whole role and permissions system that can be customised to the teams requirements."),r.a.createElement("p",null,"The project is far from finished, currently in ",r.a.createElement("b",null,"v0.1"),". With plenty of features planned, I will update this demo as major additions are added. You can check out the project on github ",r.a.createElement("a",{href:"https://github.com/kcoulsy/teamup"},"here"),"."),r.a.createElement(te.b,{header:r.a.createElement(ae.a.Title,{level:4,style:{margin:0}},"Planned Features"),dataSource:["Comments on tasks for teams","Work log to track time spent on tasks","Activity log across teams","User and team profiles","Mobile Resposiveness"],size:"small",renderItem:function(e){return r.a.createElement(te.b.Item,null,e)}})))})),ce=a(402),ie=a(222),le=a(48),oe={startRegister:function(e){var t=e.username,a=e.email,n=e.password,r=e.confirm;return function(){var e=Object(f.a)(E.a.mark((function e(s){var c,i,l,o,u;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"AUTH_REGISTER_ATTEMPT"}),e.prev=1,e.next=4,h("auth/register","POST",{username:t,email:a,password:n,confirm:r});case 4:c=e.sent,i=c.success,l=c.token,o=c.user,u=c.error,i?(s({type:"AUTH_REGISTER_SUCCESS"}),s(g(o)),s(O(l))):s(_(u)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),s(_("Something went wrong"));case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()}},ue=Object(i.b)((function(e){return{attemptingRegister:e.auth.attemptingRegister,errorMsg:e.auth.registerErrorMsg}}),oe)((function(e){var t=e.attemptingRegister,a=e.errorMsg,n=e.startRegister,s=Object(R.g)();return r.a.createElement(ee.a,{title:"Register",size:"small",className:"register-form__card"},r.a.createElement(ce.a,{onFinish:function(e){var t=e.username,a=e.email,r=e.password,s=e.confirm;n({username:t,email:a,password:r,confirm:s})}},r.a.createElement(ce.a.Item,{label:"Username",name:"username",rules:[{min:3,message:"Username must be at least ".concat(3," characters")},{required:!0,message:"Please input your username!"}]},r.a.createElement(ie.a,null)),r.a.createElement(ce.a.Item,{label:"Email",name:"email",rules:[{type:"email",message:"The input is not valid email!"},{required:!0,message:"Please input an email!"}]},r.a.createElement(ie.a,null)),r.a.createElement(ce.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"},{min:6,message:"Password must be at least ".concat(6," characters")},function(){return{validator:function(e,t){return/\d/.test(t)?Promise.resolve():Promise.reject("Your password must contain a number!")}}}]},r.a.createElement(ie.a.Password,null)),r.a.createElement(ce.a.Item,{label:"Confirm",name:"confirm",rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}]},r.a.createElement(ie.a.Password,null)),a?r.a.createElement(ce.a.Item,null,a):null,r.a.createElement(ce.a.Item,null,r.a.createElement(le.a,{type:"primary",htmlType:"submit",loading:t},"Register"),r.a.createElement(le.a,{type:"link",htmlType:"button",onClick:function(){return s.push("/login")}},"Already registered? Click here to login"))))})),me=a(117),pe=a(70),de=function(){return r.a.createElement(me.a,{justify:"center"},r.a.createElement(pe.a,null,r.a.createElement(ue,null)))},Ee={startLogin:function(e,t){return function(){var a=Object(f.a)(E.a.mark((function a(n){var r,s,c;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(j()),a.prev=1,a.next=4,h("auth/login","POST",{username:e,password:t});case 4:r=a.sent,s=r.user,(c=r.token)?(n(g(s)),n(O(c)),n(T(s.team))):n(y()),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),n(y());case 13:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}()}},fe=Object(i.b)((function(e){return{attemptingLogin:e.auth.attemptingLogin,loginAttemptFailed:e.auth.loginAttemptFailed}}),Ee)((function(e){var t=e.startLogin,a=e.attemptingLogin,n=e.loginAttemptFailed,s=Object(R.g)();return r.a.createElement(ee.a,{title:"Login",className:"login-form__card",size:"small"},r.a.createElement(ce.a,{onFinish:function(e){var a=e.username,n=e.password;return t(a,n)}},r.a.createElement(ce.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}]},r.a.createElement(ie.a,null)),r.a.createElement(ce.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(ie.a.Password,null)),n?r.a.createElement(ce.a.Item,null,"Unable to login with those credentials"):null,r.a.createElement(ce.a.Item,null,r.a.createElement(le.a,{type:"primary",htmlType:"submit",loading:a},"Login"),r.a.createElement(le.a,{type:"link",htmlType:"button",onClick:function(){return s.push("/register")}},"Not registered? Click here"))))})),ve=function(e){return r.a.createElement("div",null,r.a.createElement(me.a,{justify:"center"},r.a.createElement(pe.a,null,r.a.createElement(fe,e))))},be=function(){return r.a.createElement("div",null,"MyProfile Page")},he=a(406),ge=S.a.Content,Te=S.a.Sider,je=function(e){var t=e.views,a=Object(n.useState)(0),s=Object(x.a)(a,2),c=s[0],i=s[1];return r.a.createElement(S.a,{className:"site-layout-background settings-panel__layout"},r.a.createElement(Te,{className:"settings-panel__sider",width:200},r.a.createElement(A.a,{mode:"inline",defaultSelectedKeys:[t[c].key],selectedKeys:[t[c].key],className:"settings-panel__menu"},t.length&&t.map((function(e,t){return r.a.createElement(A.a.Item,{key:e.key,icon:e.icon,onClick:function(){i(t)}},e.label)})))),r.a.createElement(ge,{className:"settings-panel__content"},t[c].viewComponent))},Oe=a(403),ye=a(419),_e=ae.a.Title,ke=function(){return r.a.createElement("div",null,r.a.createElement(_e,{level:4,className:"user-profile-settings__title"},"Profile Settings"),r.a.createElement(ce.a,{labelCol:{sm:{span:24},md:{span:8}},wrapperCol:{sm:{span:24},md:{span:12}},name:"basic",initialValues:{remember:!0}},r.a.createElement(ce.a.Item,{label:"Full Name",name:"fullName"},r.a.createElement(ie.a,null)),r.a.createElement(ce.a.Item,{label:"Occupation",name:"occupation"},r.a.createElement(ie.a,null)),r.a.createElement(ce.a.Item,{label:"About Me",name:"bio"},r.a.createElement(ie.a.TextArea,null)),r.a.createElement(ce.a.Item,{name:"upload",label:"Upload",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList}},r.a.createElement(Oe.a,{name:"profile",action:"/upload.do",listType:"picture"},r.a.createElement(le.a,null,r.a.createElement(ye.a,null)," Click to upload"))),r.a.createElement(ce.a.Item,{wrapperCol:{md:{offset:8,span:16},sm:{offset:0,span:16}}},r.a.createElement(le.a,{type:"primary",htmlType:"submit"},"Submit"))))},Ie=ae.a.Title,we=function(){return r.a.createElement("div",null,r.a.createElement(Ie,{level:4,className:"user-change-password__title"},"Change Password"),r.a.createElement(ce.a,{labelCol:{sm:{span:24},md:{span:8}},wrapperCol:{sm:{span:24},md:{span:12}},name:"basic"},r.a.createElement(ce.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(ie.a.Password,null)),r.a.createElement(ce.a.Item,{label:"Confirm",name:"confirm",rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}]},r.a.createElement(ie.a.Password,null)),r.a.createElement(ce.a.Item,{wrapperCol:{md:{offset:8,span:16},sm:{offset:0,span:16}}},r.a.createElement(le.a,{type:"primary",htmlType:"submit"},"Change Password"))))},Pe=a(420),Re=[{key:"profile-settings",label:"Profile Settings",icon:r.a.createElement(N.a,null),viewComponent:r.a.createElement(ke,null)},{key:"change-password",label:"Change Password",icon:r.a.createElement(Pe.a,null),viewComponent:r.a.createElement(we,null)}],Se=function(){return r.a.createElement(je,{views:Re})},xe=function(){return r.a.createElement("div",null,r.a.createElement(he.a,{className:"page__page-header",title:"Account Settings"}),r.a.createElement(Se,null))},Ae=a(77),Ce=a(82),Me=a(408),Ne=a(398),Ue=a(220),Le=ae.a.Text,De=function(e){var t=e._id,a=e.title,n=e.description,s=void 0===n?"":n,c=e.hoursLeft,i=e.completion,l=Object(R.g)();return r.a.createElement(ee.a,{title:a,bordered:!1,className:"project-card",size:"small",hoverable:!0,onClick:function(){l.replace("/project/".concat(t))}},r.a.createElement(Ne.a,{direction:"vertical",className:"project-card__space"},r.a.createElement(Le,{type:"secondary",className:"project-card__description"},s.length>100?(null===s||void 0===s?void 0:s.slice(0,100))+"...":s),r.a.createElement(Le,{className:"project-card__hours-remaining"},"".concat(c," hours left")),r.a.createElement(Ue.a,{percent:i})))},Ge=function(e){var t=e.projects,a=e.completionData;function n(e){if(!a[e])return 0;if(0===a[e].totalTime)return 0;var t=a[e],n=t.complete,r=t.totalTime;return parseInt((n/r*100).toFixed(2),10)}function s(e){if(!a[e])return 0;if(0===a[e].totalTime)return 0;var t=a[e],n=t.complete;return t.totalTime-n}return r.a.createElement("div",{className:"site-card-wrapper"},r.a.createElement(me.a,{gutter:16},r.a.createElement(pe.a,{span:8},t.map((function(e,t){return t%3===0?r.a.createElement(De,{_id:e._id,key:t,title:e.title,description:e.description,hoursLeft:s(e._id),completion:n(e._id)}):null}))),r.a.createElement(pe.a,{span:8},t.map((function(e,t){return t%3===1?r.a.createElement(De,{_id:e._id,key:t,title:e.title,description:e.description,hoursLeft:s(e._id),completion:n(e._id)}):null}))),r.a.createElement(pe.a,{span:8},t.map((function(e,t){return t%3===2?r.a.createElement(De,{_id:e._id,key:t,title:e.title,description:e.description,hoursLeft:s(e._id),completion:n(e._id)}):null})))))},Fe=a(421),He=a(114),Ve=a(149),Ye=function(e){var t=e.title,a=e.subTitle,n=e.onBack,s=e.headerButtons,c=e.prevPagePath,i=e.loading,l=void 0!==i&&i,o=e.children,u=Object(He.a)(e,["title","subTitle","onBack","headerButtons","prevPagePath","loading","children"]),m=Object(R.g)(),p=void 0;return("undefined"!==typeof n||c)&&(p=function(){"undefined"!==typeof n&&n(),c&&m.push(c)}),r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,Object.assign({className:"page__page-header",title:t,subTitle:a,onBack:p,extra:s},u)),l?r.a.createElement("div",{className:"page-layout__loader-container"},r.a.createElement(Ve.a,null)):o)},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(n.useState)(e),a=Object(x.a)(t,2),r=a[0],s=a[1],c=Object(n.useCallback)((function(e){s("boolean"===typeof e?e:function(e){return!e})}),[]);return[r,c]},Je=function(){var e=Object(n.useState)([]),t=Object(x.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)({}),i=Object(x.a)(c,2),l=i[0],o=i[1],u=Be(),m=Object(x.a)(u,2),p=m[0],d=m[1],v=Object(n.useState)(!1),b=Object(x.a)(v,2),g=b[0],T=b[1],j=function(){var e=Object(f.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T(!0),e.next=4,h("/project","GET");case 4:(t=e.sent)&&(T(!1),s(t.projects),o(t.estimatedCompletions)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),T(!1);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){j()}),[]);var O=function(){var e=Object(f.a)(E.a.mark((function e(t){var n,r,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,r=t.description,e.next=3,h("/project","POST",{title:n,description:r});case 3:(c=e.sent).project&&(s([].concat(Object(Ae.a)(a),[c.project])),d(!1),$.a.success({message:"Project created successfully!",placement:"bottomRight"}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye,{title:"My Projects",loading:g,headerButtons:[r.a.createElement(le.a,{key:"3",onClick:d},"Create Project ",r.a.createElement(Fe.a,null))]},a.length?r.a.createElement(Ge,{projects:a,completionData:l}):r.a.createElement(Ce.a,{image:Ce.a.PRESENTED_IMAGE_SIMPLE,description:r.a.createElement("span",null,"No projects found.")},r.a.createElement(le.a,{type:"primary",onClick:d},"Create Now"))),r.a.createElement(Me.a,{title:"Create Project",visible:p,onClose:d,width:"450"},r.a.createElement(ce.a,{name:"createProject",labelCol:{span:5},wrapperCol:{span:19},onFinish:O},r.a.createElement(ce.a.Item,{label:"Title",name:"title",rules:[{required:!0,message:"You must have a project title."},{min:3,message:"Your title must be at least 3 characters."}]},r.a.createElement(ie.a,null)),r.a.createElement(ce.a.Item,{label:"Description",name:"description"},r.a.createElement(ie.a.TextArea,null)),r.a.createElement(ce.a.Item,null,r.a.createElement(le.a,{type:"primary",htmlType:"submit"},"Create Project")))))},Ke=Object(i.b)((function(e){return{hasTeam:G(e)}}))((function(e){var t=e.hasTeam,a=Object(R.g)();return t?r.a.createElement(R.a,{to:"/team/projects"}):r.a.createElement("div",null,r.a.createElement(me.a,{justify:"center"},r.a.createElement(pe.a,null,r.a.createElement(Z.a,{message:"You do not have a team! Contact your project manager for an\r invite or create a team here"}))),r.a.createElement(me.a,{justify:"center"},r.a.createElement(pe.a,null,r.a.createElement(le.a,{className:"page-team-profile__create-team-button",onClick:function(){return a.push("/team/create")}},"Create Team"))))})),qe=Object(i.b)((function(e){return{canCreateProject:F(e,"PERM_CREATE_TEAM_PROJECT")}}))((function(e){var t=e.canCreateProject,a=Object(n.useState)([]),s=Object(x.a)(a,2),c=s[0],i=s[1],l=Object(n.useState)({}),o=Object(x.a)(l,2),u=o[0],m=o[1],p=Be(),d=Object(x.a)(p,2),v=d[0],b=d[1],g=Object(n.useState)(!1),T=Object(x.a)(g,2),j=T[0],O=T[1],y=function(){var e=Object(f.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(!0),e.next=4,h("/project?team=true","GET");case 4:(t=e.sent)&&(O(!1),i(t.projects),m(t.estimatedCompletions)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),O(!1);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){y()}),[]);var _=[];return t&&_.push(r.a.createElement(le.a,{key:"3",onClick:b},"Create Project ",r.a.createElement(Fe.a,null))),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye,{title:"Team Projects",loading:j,headerButtons:_},c.length?r.a.createElement(Ge,{projects:c,completionData:u}):r.a.createElement(Ce.a,{image:Ce.a.PRESENTED_IMAGE_SIMPLE,description:r.a.createElement("span",null,"No projects found.")},r.a.createElement(le.a,{type:"primary",onClick:b},"Create Now"))),r.a.createElement(Me.a,{title:"Create Project",visible:v,onClose:b,width:"450"},r.a.createElement(ce.a,{name:"createProject",labelCol:{span:5},wrapperCol:{span:19},onFinish:function(){var e=Object(f.a)(E.a.mark((function e(t){var a,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.title,n=t.description,e.next=3,h("/project/?team=true","POST",{title:a,description:n});case 3:(r=e.sent).project&&(i([].concat(Object(Ae.a)(c),[r.project])),b(!1),$.a.success({message:"Project created successfully!",placement:"bottomRight"}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement(ce.a.Item,{label:"Title",name:"title",rules:[{required:!0,message:"You must have a project title."},{min:3,message:"Your title must be at least 3 characters."}]},r.a.createElement(ie.a,null)),r.a.createElement(ce.a.Item,{label:"Description",name:"description"},r.a.createElement(ie.a.TextArea,null)),r.a.createElement(ce.a.Item,null,r.a.createElement(le.a,{type:"primary",htmlType:"submit"},"Create Project")))))})),ze=X.a.confirm,We={leaveTeam:function(){return function(){var e=Object(f.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(f.a)(E.a.mark((function e(a,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("/team/leave","POST");case 3:e.sent.user.team||(t(T({})),a(!0)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},updateTeam:function(e){var t=e.name,a=e.description;return function(){var e=Object(f.a)(E.a.mark((function e(n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(f.a)(E.a.mark((function e(r,s){var c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("/team/update","PUT",{name:t,description:a});case 3:(c=e.sent).success&&(n(T(c.team)),r(!0)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s(!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Qe=Object(i.b)((function(e){return{teamName:e.team.name,teamDesc:e.team.description,canUpdateTeamSettings:F(e,"PERM_UPDATE_TEAM_DETAILS")}}),We)((function(e){var t=e.teamName,a=e.teamDesc,n=e.updateTeam,s=e.leaveTeam,c=e.canUpdateTeamSettings,i=Object(R.g)(),l=function(){var e=Object(f.a)(E.a.mark((function e(t){var a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.teamName,r=t.teamDesc,e.next=3,n({name:a,description:r});case 3:e.sent?$.a.success({message:"Team updated successfully!",placement:"bottomRight"}):$.a.error({message:"Something went wrong updating team!",placement:"bottomRight"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(he.a,{title:"General Settings",subTitle:c?void 0:"You do not have permissions to update team settings.",className:"team-settings__page-header"}),r.a.createElement(ce.a,{labelCol:{sm:{span:24},md:{span:8}},wrapperCol:{sm:{span:24},md:{span:12}},name:"teamGeneral",initialValues:{teamName:t,teamDesc:a},onFinish:l},r.a.createElement(ce.a.Item,{label:"Team Name",name:"teamName"},r.a.createElement(ie.a,{disabled:!c})),r.a.createElement(ce.a.Item,{label:"Team Description",name:"teamDesc"},r.a.createElement(ie.a.TextArea,{disabled:!c})),r.a.createElement(ce.a.Item,{wrapperCol:{md:{offset:8,span:16},sm:{offset:0,span:16}}},r.a.createElement(le.a,{type:"primary",htmlType:"submit",disabled:!c},"Submit"))),r.a.createElement(le.a,{danger:!0,onClick:Object(f.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ze({title:"Leave Team?",content:"Leaving the team will prevent you from accessing the teams projects.",onOk:function(){var e=Object(f.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:e.sent&&($.a.success({message:"Successfully left the team"}),i.push("/"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e)})))},"Leave Team"))})),Xe=a(81),Ze=a(400),$e=ae.a.Title,et=ae.a.Link,tt=ae.a.Text,at=Xe.a.Option,nt={updateTeamMemberRole:function(e,t){return function(){var a=Object(f.a)(E.a.mark((function a(n){return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(){var a=Object(f.a)(E.a.mark((function a(r,s){var c;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h("/team/user/update","POST",{userId:e,roleIndex:t});case 3:(c=a.sent).success?(n(T(c.team)),r(!0)):s(!1),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),s(!1);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e,t){return a.apply(this,arguments)}}()));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},removeTeamUser:function(e){return function(t){return new Promise(function(){var a=Object(f.a)(E.a.mark((function a(n,r){var s,c,i;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h("/team/user/remove","POST",{userId:e});case 3:s=a.sent,c=s.success,i=s.team,c?(t(T(i)),n(!0)):n(!1),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),n(!1);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e,t){return a.apply(this,arguments)}}())}}},rt=Object(i.b)((function(e){return{teamMembers:e.team.users,roles:e.team.roles,loggedInUser:e.user,canUpdateTeamMembers:F(e,"PERM_UPDATE_TEAM_MEMBERS"),canInviteTeamMembers:F(e,"PERM_INVITE_TEAM_MEMBERS"),canRemoveTeamMembers:F(e,"PERM_REMOVE_TEAM_MEMBERS")}}),nt)((function(e){var t=e.teamMembers,a=e.roles,n=e.updateTeamMemberRole,s=e.removeTeamUser,c=e.loggedInUser,i=e.canInviteTeamMembers,l=e.canUpdateTeamMembers,o=e.canRemoveTeamMembers,u=ce.a.useForm(),m=Object(x.a)(u,1)[0],p=t.map((function(e){return{key:e.user._id,name:e.user.email,roleIndex:e.roleIndex}})),d=void 0;return l||o?l?o||(d="You do not have permissions to remove team members."):d="You do not have permissions to update team members.":d="You do not have permissions to update or remove team members.",r.a.createElement("div",null,r.a.createElement(he.a,{title:"Team Members",subTitle:d,className:"team-settings__page-header"}),r.a.createElement(Ze.a,{dataSource:p,columns:[{title:"Name",dataIndex:"name",key:"name"},{title:"Role",dataIndex:"role",key:"role",render:function(e,t){return c._id!==t.key&&l?r.a.createElement(Xe.a,{defaultValue:a[t.roleIndex],onChange:function(){var e=Object(f.a)(E.a.mark((function e(r){var s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=parseInt(r,10),e.next=3,n(t.key,s);case 3:e.sent&&$.a.success({message:"User ".concat(t.name," updated to role ").concat(a[s]),placement:"bottomRight"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},a.map((function(e,t){return r.a.createElement(at,{key:e,value:t},e)}))):a[t.roleIndex]}},{title:"Actions",dataIndex:"actions",key:"actions",render:function(e,t){return c._id!==t.key&&o?r.a.createElement(Ne.a,{size:"middle"},r.a.createElement(et,{onClick:Object(f.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(t.key).then((function(){$.a.success({message:"".concat(t.name," successfully removed from the team!"),placement:"bottomRight"})}));case 1:case"end":return e.stop()}}),e)})))},"Remove")):null}}],size:"middle"}),r.a.createElement($e,{level:4,className:"team-team-members__invite-title"},"Invite Member"),i?r.a.createElement(ce.a,{form:m,layout:"inline",name:"invite",initialValues:{remember:!0},onFinish:function(){var e=Object(f.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("/team/invite","POST",{email:t.email});case 2:(a=e.sent).success?$.a.success({message:a.message,placement:"bottomRight"}):$.a.error({message:a.message,placement:"bottomRight"}),m.resetFields();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement(ce.a.Item,{label:"Email",name:"email"},r.a.createElement(ie.a,null)),r.a.createElement(ce.a.Item,null,r.a.createElement(le.a,{type:"primary",htmlType:"submit"},"Invite"))):r.a.createElement(tt,null,"You do not have permissions to invite team members."))})),st=a(422),ct=a(423),it={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}},lt={updateTeamRoles:function(e){return function(){var t=Object(f.a)(E.a.mark((function t(a,n){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(f.a)(E.a.mark((function t(r,s){var c,i,l;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h("/team/roles","POST",{roles:e});case 3:c=t.sent,i=n(),l=i.team,c.success?(a(T(Object(v.a)({},l,{roles:e}))),r(!0)):s(!1),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),s(!1);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}},ot=Object(i.b)((function(e){return{roles:e.team.roles,canUpdateTeamRoles:F(e,"PERM_UPDATE_TEAM_ROLES")}}),lt)((function(e){var t=e.roles,a=e.updateTeamRoles,s=e.canUpdateTeamRoles,c=Object(n.useState)(t),i=Object(x.a)(c,2),l=i[0],o=i[1],u=function(){var e=Object(f.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m()){e.next=7;break}return e.next=3,a(l);case 3:e.sent?$.a.success({message:"Roles successfully updated!",placement:"bottomRight"}):$.a.error({message:"Something went wrong updating roles!",placement:"bottomRight"}),e.next=8;break;case 7:$.a.error({message:"You cannot have roles which are empty!",placement:"bottomRight"});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){return l.reduce((function(e,t){return!!t.length&&e}),!0)};return r.a.createElement("div",null,r.a.createElement(he.a,{title:"Team Roles",subTitle:s?void 0:"You do not have permissions to modify role permissions but can see them.",className:"team-settings__page-header"}),r.a.createElement(ce.a,Object.assign({name:"dynamic_form_item"},it),l.map((function(e,t){return r.a.createElement(ce.a.Item,Object.assign({},it,{key:"role_".concat(t)}),r.a.createElement(ce.a.Item,{noStyle:!0},r.a.createElement(ie.a,{placeholder:"Role Name",className:"team-team-roles__input",value:e,disabled:!s,onChange:function(e){return function(e,t){var a=Object(Ae.a)(l);a[e]=t,o(a)}(t,e.currentTarget.value)}})),0!==t&&s?r.a.createElement(st.a,{className:"dynamic-delete-button team-team-roles__delete-icon",onClick:function(){!function(e){o(l.filter((function(t,a){return a!==e})))}(t)}}):null)})),s?r.a.createElement(ce.a.Item,null,r.a.createElement(le.a,{type:"dashed",onClick:function(){o([].concat(Object(Ae.a)(l),[""]))},style:{width:"60%"}},r.a.createElement(ct.a,null)," Add Role")):null,r.a.createElement(ce.a.Item,null,r.a.createElement(le.a,{type:"primary",htmlType:"submit",disabled:!s,onClick:u},"Save"))))})),ut=a(407),mt=Xe.a.Option,pt={updateTeamPermissions:function(e,t){return function(a,n){return new Promise(function(){var n=Object(f.a)(E.a.mark((function n(r,s){var c;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h("/team/permissions","POST",{roleIndex:e,permissions:t});case 3:(c=n.sent).success?(a(T(c.team)),r(!0)):s(!1),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),s(!1);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,t){return n.apply(this,arguments)}}())}}},dt=Object(i.b)((function(e){return{canUpdatePermissions:F(e,"PERM_UPDATE_TEAM_PERMS"),roles:e.team.roles,rolePermissions:e.team.rolePermissions}}),pt)((function(e){var t=e.canUpdatePermissions,a=e.roles,s=e.rolePermissions,c=e.updateTeamPermissions,i=Object(n.useState)(0),l=Object(x.a)(i,2),o=l[0],u=l[1],m=[];s[o]&&s[o].permissions&&(m=s[o].permissions);var p=Object(n.useState)(m),d=Object(x.a)(p,2),v=d[0],b=d[1],h=Object.entries(V).map((function(e){var t=Object(x.a)(e,2);return{key:t[0],label:t[1]}})),g=function(){var e=Object(f.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.indexOf(t),u(n),s[n]?b(s[n].permissions):b([]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(f.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(o,t)&&(b(t),$.a.success({message:"Updated permissions for role ".concat(a[o]),placement:"bottomRight"}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(he.a,{title:"Role Permissions",subTitle:t?void 0:"You do not have permissions to modify role permissions but can see them.",className:"team-settings__page-header"}),r.a.createElement(Xe.a,{defaultValue:a[o],className:"team-role-perms__role-select",onChange:g},a.map((function(e){return r.a.createElement(mt,{key:e,value:e},e)}))),r.a.createElement(ut.a,{disabled:!t,dataSource:h,showSearch:!0,listStyle:{width:"40%",height:300},operations:["Add Role","Remove Role"],targetKeys:v,onChange:T,render:function(e){return"".concat(e.label)}}))})),Et=[{key:"general-settings",label:"General Settings",icon:r.a.createElement(U.a,null),viewComponent:r.a.createElement(Qe,null)},{key:"team-members",label:"Team Members",icon:r.a.createElement(U.a,null),viewComponent:r.a.createElement(rt,null)},{key:"team-roles",label:"Team Roles",icon:r.a.createElement(U.a,null),viewComponent:r.a.createElement(ot,null)},{key:"role-permissions",label:"Role Permissions",icon:r.a.createElement(U.a,null),viewComponent:r.a.createElement(dt,null)}],ft=function(){return r.a.createElement(je,{views:Et})},vt=function(){return r.a.createElement("div",null,r.a.createElement(he.a,{className:"page__page-header",title:"Team Settings"}),r.a.createElement(ft,null))},bt=a(413),ht=[{title:"Title",dataIndex:"title",render:function(e){var t=e.label,a=e.projectId,n=e.taskId;return r.a.createElement(P.b,{to:"/project/".concat(a,"/task/").concat(n)},t)}},{title:"Assignee",dataIndex:"assignee",render:function(e){return e.email||"Unassigned"}},{title:"Status",dataIndex:"status",render:function(e){return r.a.createElement(bt.a,{color:e.color},e.label)}},{title:"Time Remaining",dataIndex:"timeRemaining"}],gt=function(e){var t=e.tasks;return r.a.createElement("div",null,r.a.createElement(ee.a,{title:"Tasks",size:"small"},r.a.createElement(Ze.a,{size:"middle",columns:ht,dataSource:t})))};!function(e){e.NOT_STARTED="NOT_STARTED",e.IN_PROGRESS="IN_PROGRESS",e.TESTING="TESTING",e.PENDING_REVIEW="PENDING_REVIEW",e.DONE="DONE"}(K||(K={}));var Tt=(J={},Object(H.a)(J,K.NOT_STARTED,"Not Started"),Object(H.a)(J,K.IN_PROGRESS,"In Progress"),Object(H.a)(J,K.TESTING,"Testing"),Object(H.a)(J,K.PENDING_REVIEW,"Pending Review"),Object(H.a)(J,K.DONE,"Done"),J),jt=function(e){switch(e){case K.NOT_STARTED:return{color:"red",label:Tt[K.NOT_STARTED]};case K.IN_PROGRESS:return{color:"orange",label:Tt[K.IN_PROGRESS]};case K.PENDING_REVIEW:return{color:"purple",label:Tt[K.PENDING_REVIEW]};case K.TESTING:return{color:"blue",label:Tt[K.TESTING]};case K.DONE:return{color:"green",label:Tt[K.DONE]};default:return{color:"red",label:"N/A"}}},Ot=a(399),yt=a(411),_t=Object(i.b)((function(e){return{team:e.team}}))((function(e){var t=e.initialValues,a=e.teamView,n=e.onFormFinish,s=e.type,c=e.team,i=ce.a.useForm(),l=Object(x.a)(i,1)[0],o={};if(t){var u=t.title,m=t.description,p=t.status,d=t.estimatedHours,E=t.assignee;o={assignee:null===E||void 0===E?void 0:E.email,title:u,description:m,status:p.label,estimatedHours:d}}var f=c.users.map((function(e){var t=e.user;return{value:t.username?t.username:t.email}}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(ce.a,{form:l,labelCol:{span:6},wrapperCol:{span:16},layout:"horizontal",initialValues:o||void 0,onFinish:function(e){var t=c.users.find((function(t){var a=t.user;return e.assignee===a.email||e.assignee===a.username}));if(e.assignee=t?t.user._id:void 0,!Object.values(K).includes(e.status)){var a=Object.values(Tt).indexOf(e.status);e.status=Object.keys(Tt)[a]}n(e),l.resetFields()}},r.a.createElement(ce.a.Item,{label:"Title",name:"title"},r.a.createElement(ie.a,null)),r.a.createElement(ce.a.Item,{label:"Description",name:"description"},r.a.createElement(ie.a.TextArea,null)),a?r.a.createElement(ce.a.Item,{label:"Assignee",name:"assignee"},r.a.createElement(Ot.a,{placeholder:"Type a name here",filterOption:function(e,t){return-1!==(null===t||void 0===t?void 0:t.value.toUpperCase().indexOf(e.toUpperCase()))},options:f})):null,r.a.createElement(ce.a.Item,{label:"Hours",name:"estimatedHours"},r.a.createElement(yt.a,null)),r.a.createElement(ce.a.Item,{label:"Select",name:"status"},r.a.createElement(Xe.a,null,Object.values(K).map((function(e){return r.a.createElement(Xe.a.Option,{key:e,value:e},Tt[e])})))),r.a.createElement(ce.a.Item,null,r.a.createElement(le.a,{type:"primary",htmlType:"submit"},"".concat(s," Task")))))})),kt=X.a.confirm,It=Object(i.b)((function(e){return{canAddTeamTask:F(e,"PERM_ADD_TASK"),canEditTeamProject:F(e,"PERM_EDIT_TEAM_PROJECT"),canRemoveTeamProject:F(e,"PERM_REMOVE_TEAM_PROJECT"),user:e.user}}))((function(e){var t=e.canAddTeamTask,a=e.canEditTeamProject,s=e.canRemoveTeamProject,c=e.user,i=Object(R.h)().projectid,l=Object(R.g)(),o=Object(n.useState)(),u=Object(x.a)(o,2),m=u[0],p=u[1],d=Be(),v=Object(x.a)(d,2),b=v[0],g=v[1],T=Be(),j=Object(x.a)(T,2),O=j[0],y=j[1],_=Object(n.useState)(!1),k=Object(x.a)(_,2),I=k[0],w=k[1],P=(null===m||void 0===m?void 0:m.user)===c._id,S=function(){var e=Object(f.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(!0),e.next=4,h("/project/".concat(i),"GET");case 4:(t=e.sent)&&(w(!1),p(t.project)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),w(!1);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){S()}),[]);var A=function(e,t){return e&&e.map((function(e){return{key:e._id,title:{label:e.title,projectId:t,taskId:e._id},description:e.description,status:jt(e.status),assignee:e.assignee?e.assignee:"Unassigned",timeRemaining:e.estimatedHours}}))||[]}(null===m||void 0===m?void 0:m.tasks,i),C=function(){var e=Object(f.a)(E.a.mark((function e(t){var a,n,r,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.title,n=t.description,r=t.estimatedHours,s=t.status,e.next=3,h("/task","POST",{project:null===m||void 0===m?void 0:m._id,title:a,description:n,estimatedHours:r,status:s});case 3:e.sent&&(S(),y(!1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(f.a)(E.a.mark((function e(t){var a,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.title,n=t.description,e.next=3,h("/project","PUT",{projectId:null===m||void 0===m?void 0:m._id,title:a,description:n});case 3:(r=e.sent).success?(p(r.project),g(!1),$.a.success({message:"Project edited successfully!",placement:"bottomRight"})):$.a.error({message:"You do not have permission to update this project.",placement:"bottomRight"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=[];return(P||!(null===m||void 0===m?void 0:m.team)||a)&&N.push(r.a.createElement(le.a,{key:"1",type:"default",onClick:g},"Edit Project",r.a.createElement(Fe.a,null))),(P||!(null===m||void 0===m?void 0:m.team)||t)&&N.push(r.a.createElement(le.a,{key:"2",type:"primary",onClick:y},"Add Task ",r.a.createElement(ct.a,null))),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye,{title:null===m||void 0===m?void 0:m.title,subTitle:null===m||void 0===m?void 0:m.description,loading:I,prevPagePath:"/projects",headerButtons:N},r.a.createElement(gt,{tasks:A})),r.a.createElement(Me.a,{title:"Edit Project",visible:b,onClose:g,width:"450"},r.a.createElement(ce.a,{name:"editProject",labelCol:{span:5},wrapperCol:{span:19},initialValues:{title:null===m||void 0===m?void 0:m.title,description:null===m||void 0===m?void 0:m.description},onFinish:M},r.a.createElement(ce.a.Item,{label:"Title",name:"title",rules:[{required:!0,message:"You must have a project title."},{min:3,message:"Your title must be at least 3 characters."}]},r.a.createElement(ie.a,null)),r.a.createElement(ce.a.Item,{label:"Description",name:"description"},r.a.createElement(ie.a.TextArea,null)),r.a.createElement(ce.a.Item,null,r.a.createElement(Ne.a,null,r.a.createElement(le.a,{type:"primary",htmlType:"submit"},"Edit Project"),s&&r.a.createElement(le.a,{danger:!0,onClick:function(){kt({title:"Remove Project",content:"This project and all tasks will be lost, are you sure you want to delete it?",onOk:function(){var e=Object(f.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("/project","DELETE",{projectId:i});case 2:e.sent.success?(l.push((null===m||void 0===m?void 0:m.team)?"/team/projects":"/projects"),$.a.success({message:"Project has been successfully deleted!",placement:"bottomRight"})):$.a.error({message:"You do not have permission to remove this project.",placement:"bottomRight"});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})}},"Remove Project"))))),r.a.createElement(Me.a,{title:"Add Task To Project",visible:O,onClose:function(){S(),y()},width:"450"},r.a.createElement(_t,{teamView:!1,onFormFinish:C,type:"Add"})))})),wt={labelCol:{span:8},wrapperCol:{span:16}},Pt={wrapperCol:{offset:8,span:16}},Rt={createTeam:function(e){var t=e.name,a=e.description;return function(e){return new Promise(function(){var n=Object(f.a)(E.a.mark((function n(r,s){var c;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h("/team/create","POST",{name:t,description:a});case 2:(c=n.sent).team&&(e(T(c.team)),r(!0));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}}},St=Object(i.b)((function(e){return{hasTeamFromState:G(e)}}),Rt)((function(e){var t=e.createTeam,a=e.hasTeamFromState,n=Object(R.g)();return a?r.a.createElement(R.a,{to:"/team/projects"}):r.a.createElement("div",null,r.a.createElement(ee.a,{title:"Create Team"},r.a.createElement(ce.a,Object.assign({},wt,{name:"basic",initialValues:{remember:!0},onFinish:function(){var e=Object(f.a)(E.a.mark((function e(a){var r,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.teamName,s=a.teamDesc,e.next=3,t({name:r,description:s});case 3:e.sent&&($.a.success({message:"Team Created",placement:"bottomRight"}),n.push("/team/projects"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),r.a.createElement(ce.a.Item,{label:"Team Name",name:"teamName"},r.a.createElement(ie.a,null)),r.a.createElement(ce.a.Item,{label:"Team Description",name:"teamDesc"},r.a.createElement(ie.a.TextArea,null)),r.a.createElement(ce.a.Item,Pt,r.a.createElement(le.a,{type:"primary",htmlType:"submit"},"Create Team")))))})),xt=a(409),At=ae.a.Paragraph,Ct=ae.a.Text,Mt=ae.a.Link,Nt=function(e){var t=e.task,a=Object(R.g)();return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{size:"small",className:"task-view"},r.a.createElement(me.a,null,r.a.createElement(pe.a,{span:8},r.a.createElement(Ct,{strong:!0,className:"task-view__assignee"},"Assignee:"),r.a.createElement(Mt,null,t.assignee?t.assignee.email:"Unassigned")),r.a.createElement(pe.a,{span:8},r.a.createElement(Ct,{strong:!0,className:"task-view__status"},"Status:"),r.a.createElement(bt.a,{color:t.status.color},t.status.label)),r.a.createElement(pe.a,{span:8},r.a.createElement(Ct,{strong:!0,className:"task-view__time"},"Estimated Time Remaining:"),r.a.createElement(Ct,null,t.estimatedHours)))),r.a.createElement(ee.a,{size:"small",className:"task-view__description"},r.a.createElement(At,{ellipsis:{rows:2,expandable:!0,symbol:"more"}},t.description))):r.a.createElement(xt.a,{status:"warning",title:"This task does not exist!.",extra:r.a.createElement(le.a,{type:"primary",key:"console",onClick:function(){a.push("/")}},"Back to dashboard")})},Ut=a(424),Lt=X.a.confirm,Dt=Object(i.b)((function(e){return{loggedInUser:e.user,canEditOthersTasks:F(e,"PERM_EDIT_OTHER_TASK"),canDeleteOthersTasks:F(e,"PERM_DELETE_OTHER_TASK")}}))((function(e){var t=e.loggedInUser,a=e.canEditOthersTasks,s=e.canDeleteOthersTasks,c=Object(R.h)(),i=c.projectid,l=c.taskid,o=Object(R.g)(),u=Be(),m=Object(x.a)(u,2),p=m[0],d=m[1],v=Object(n.useState)(),b=Object(x.a)(v,2),g=b[0],T=b[1],j=(null===g||void 0===g?void 0:g.createdBy)===t._id,O=Object(n.useState)(!1),y=Object(x.a)(O,2),_=y[0],k=y[1];Object(n.useEffect)((function(){var e;k(!0),(e=l,new Promise(function(){var t=Object(f.a)(E.a.mark((function t(a,n){var r,s;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h("/task/".concat(e),"GET");case 3:(r=t.sent)?(s={title:r.task.title,description:r.task.description,assignee:r.task.assignee,estimatedHours:r.task.estimatedHours,project:r.task.project,status:jt(r.task.status),createdBy:r.task.createdBy},a(s)):n(void 0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(void 0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}())).then((function(e){k(!1),T(e)})).catch((function(){k(!1),T(void 0)}))}),[l]);var I=function(e){var t,a;(t=l,a=e,new Promise(function(){var e=Object(f.a)(E.a.mark((function e(n,r){var s,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("/task/".concat(t),"PUT",a);case 3:(s=e.sent)?(c={title:s.task.title,description:s.task.description,assignee:s.task.assignee,estimatedHours:s.task.estimatedHours,project:s.task.project,status:jt(s.task.status),createdBy:s.task.createdBy},n(c)):r(void 0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(void 0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}())).then((function(e){$.a.success({message:"Task updated successfully!",placement:"bottomRight"}),T(e)})).catch((function(e){$.a.error({message:"Something went wrong updating!",placement:"bottomRight"}),T(void 0)})).finally((function(){return d(!1)}))},w=[];if((j||a)&&w.push(r.a.createElement(le.a,{key:"editTask",onClick:d},"Edit Task ",r.a.createElement(Fe.a,null))),g){var P=Object.values(K),S=Object.values(Tt).indexOf(g.status.label);if(S+1<=P.length-1){var A=P[S+1],C="Move to ".concat(Tt[A]);w=[].concat(Object(Ae.a)(w),[r.a.createElement(le.a,{type:"primary",key:"nextStatus",onClick:function(){return I({status:A})}},C,r.a.createElement(Ut.a,null))])}}return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye,{title:null===g||void 0===g?void 0:g.title,prevPagePath:"/project/".concat(i),headerButtons:w,loading:_},r.a.createElement(Nt,{task:g})),r.a.createElement(Me.a,{title:"Edit Project Task",visible:p,onClose:d,width:"450"},r.a.createElement(_t,{onFormFinish:function(){var e=Object(f.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(!1),I(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),type:"Edit",initialValues:g,teamView:!!(null===g||void 0===g?void 0:g.project.team)}),(j||s)&&r.a.createElement(le.a,{danger:!0,onClick:function(){Lt({title:"Delete Task",content:"Are you sure you want to delete this task?",onOk:function(){var e=Object(f.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("/task/".concat(l),"DELETE");case 2:e.sent&&(d(!1),$.a.success({message:"Task deleted!",placement:"bottomRight"}),o.push("/project/".concat(i)));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})}},"Delete Task")))})),Gt=function(e,t){return function(a){return e?t:r.a.createElement(R.a,{to:{pathname:"/login",state:{from:a.location}}})}},Ft=Object(i.b)((function(e){return{isLoggedIn:D(e.auth.token)}}))((function(e){var t=e.isLoggedIn,a=e.children,n=Object(He.a)(e,["isLoggedIn","children"]);return r.a.createElement(R.b,Object.assign({},n,{render:Gt(t,a)}))})),Ht=function(e,t){return function(a){return e?r.a.createElement(R.a,{to:{pathname:"/",state:{from:a.location}}}):t}},Vt=Object(i.b)((function(e){return{isLoggedIn:D(e.auth.token)}}))((function(e){var t=e.isLoggedIn,a=e.children,n=Object(He.a)(e,["isLoggedIn","children"]);return r.a.createElement(R.b,Object.assign({},n,{render:Ht(t,a)}))})),Yt=function(e){var t=e.children;return r.a.createElement(P.a,null,t,r.a.createElement(Q,null,r.a.createElement(R.d,null,r.a.createElement(Ft,{exact:!0,path:"/"},r.a.createElement(se,null)),r.a.createElement(Vt,{path:"/register"},r.a.createElement(de,null)),r.a.createElement(Vt,{path:"/login"},r.a.createElement(ve,null)),r.a.createElement(Ft,{path:"/me"},r.a.createElement(be,null)),r.a.createElement(Ft,{path:"/projects"},r.a.createElement(Je,null)),r.a.createElement(Ft,{path:"/settings"},r.a.createElement(xe,null)),r.a.createElement(Ft,{exact:!0,path:"/team"},r.a.createElement(Ke,null)),r.a.createElement(Ft,{exact:!0,path:"/team/create"},r.a.createElement(St,null)),r.a.createElement(Ft,{path:"/team/projects"},r.a.createElement(qe,null)),r.a.createElement(Ft,{path:"/team/settings"},r.a.createElement(vt,null)),r.a.createElement(Ft,{exact:!0,path:"/project/:projectid"},r.a.createElement(It,null)),r.a.createElement(Ft,{path:"/project/:projectid/task/:taskid"},r.a.createElement(Dt,null)))))},Bt=(a(394),a(395),{initialise:function(){return function(){var e=Object(f.a)(E.a.mark((function e(t,a){var n,r,s,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a().auth.appInitialising){e.next=2;break}return e.abrupt("return");case 2:if(t({type:"APP_INITIALISING"}),n=localStorage.getItem("userToken"),t({type:"AUTH_LOGIN_ATTEMPT"}),"string"!==typeof n){e.next=23;break}return e.next=8,h("auth/verify","GET");case 8:if(!(r=e.sent).valid){e.next=19;break}return t(O(n)),r.user&&t(g(r.user)),e.next=14,h("team/","GET");case 14:s=e.sent,(c=s.team)&&Object.keys(c).length?t(T({_id:c._id,name:c.name,description:c.description,users:c.users,roles:c.roles,rolePermissions:c.rolePermissions})):t(k()),e.next=21;break;case 19:t(y()),t(k());case 21:e.next=25;break;case 23:t(y()),t(k());case 25:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}}),Jt=Object(i.b)(void 0,Bt)((function(e){return(0,e.initialise)(),r.a.createElement(Yt,null)}));c.a.render(r.a.createElement(i.a,{store:p},r.a.createElement(Jt,null)),document.getElementById("root"))}},[[226,1,2]]]);
//# sourceMappingURL=main.d7cc6b48.chunk.js.map